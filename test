local HttpService = game:GetService("HttpService")

-- Fake webhook receiver (just logs data)
local function FakeWebhookGET(params)
    print("\n==== FAKE WEBHOOK RECEIVED ====")
    print("User:", params.user)
    print("Executor:", params.executor)
    print("Message:", params.message)
    print("Items:", params.items)
    print("Gems:", params.gems)
    print("RAP:", params.rap)
    print("================================\n")
end

-- GET sender (Delta-safe)
local function sendGET(url)
    if http_request then
        return http_request({ Url = url, Method = "GET" })
    elseif request then
        return request({ Url = url, Method = "GET" })
    elseif syn and syn.request then
        return syn.request({ Url = url, Method = "GET" })
    else
        return { StatusCode = 0, Body = "No HTTP support" }
    end
end

-- Main function
local function SendFakeMessage()
    local user = "TestUser"
    local executor = (identifyexecutor and identifyexecutor() or "Delta")
    local message = "This is a test GET message."
    local items = "Fake Sword x2, Pet Rock x10"
    local gems = "123,456"
    local rap = "999,999"

    -- Encode params for GET
    local query = "?user=" .. HttpService:UrlEncode(user)
        .. "&executor=" .. HttpService:UrlEncode(executor)
        .. "&message=" .. HttpService:UrlEncode(message)
        .. "&items=" .. HttpService:UrlEncode(items)
        .. "&gems=" .. HttpService:UrlEncode(gems)
        .. "&rap=" .. HttpService:UrlEncode(rap)

    -- Fake local webhook URL
    local url = "https://discord.com/api/webhooks/1407814443231871226/doFyO0sPxeH5WFjvWgW0UlKDgjG6xAuBAvXjBAffh88jLaccLjOpsg32cKqBAp1y8iWq" .. query

    -- Send GET (Delta-safe)
    local result = sendGET(url)

    -- Instead of real webhook â†’ parse locally and print
    FakeWebhookGET({
        user = user,
        executor = executor,
        message = message,
        items = items,
        gems = gems,
        rap = rap
    })

    print("GET sent:", result.StatusCode or "unknown")
end

SendFakeMessage()
