export default async function handler(req, res) {
    const webhook = process.env.WEBHOOK_URL;
    if (!webhook) {
        return res.status(500).json({ error: "WEBHOOK_URL not configured" });
    }

    // Prepare message
    const msg = req.query.msg || "No message";
    const user = req.query.user || "Unknown";
    const extra = req.query.extra || "None";

    const payload = {
        content: null,
        embeds: [{
            title: "Delta GET Webhook",
            color: 65280,
            fields: [
                { name: "User", value: user },
                { name: "Message", value: msg },
                { name: "Extra", value: extra }
            ],
            footer: {
                text: "Delivered via GET â†’ POST bridge"
            }
        }]
    };

    // POST to your Discord webhook
    const result = await fetch(webhook, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
    });

    return res.status(200).json({ ok: true });
}
